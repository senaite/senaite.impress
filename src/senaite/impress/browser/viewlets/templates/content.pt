<!-- CONTENTS -->
<div class="col-sm-12">
  <div class="mt-3 listing-table">
    <div id="impress-content-table"
         tal:content="structure view/contents_table">
    </div>
  </div>
</div>



<table tal:condition="python:False" class="table table-sm table-condensed small my-4">
  <thead>
    <tr>
      <th i18n:translate="">ID</th>
      <th i18n:translate="">Received</th>
      <th i18n:translate="">Client</th>
      <th i18n:translate="">Contact</th>
      <th i18n:translate="">CC Contacts</th>
      <th i18n:translate="">CC Emails</th>
      <th i18n:translate="">State</th>
    </tr>
  </thead>
  <tbody>
    <tr class="report-row"
        tal:define="uids python:view.get_uids()"
        tal:repeat="model python:view.get_collection(uids=uids, group_by='getClientUID')"
        tal:attributes="uid model/UID;">
      <!-- ID -->
      <td>
        <a href="#"
           tal:attributes="href string:${model/absolute_url}">
          <span tal:content="model/getId"/>
        </a>
      </td>
      <!-- Date Received -->
      <td>
        <span tal:content="python:here.toLocalizedTime(model.DateReceived)"/>
      </td>
      <!-- Client -->
      <td>
        <a href="#"
           tal:attributes="href string:${model/Client/absolute_url}">
          <span tal:content="model/Client/Name"/>
        </a>
      </td>
      <!-- Contact Fullname/Email -->
      <td>
        <tal:contact define="contact model/Contact"
                     condition="contact">
          <tal:email condition="contact/EmailAddress">
            <a href="#"
               tal:attributes="href string:mailto:${contact/EmailAddress}">
              <span tal:content="contact/Fullname|nothing" />
            </a>
          </tal:email>
          <tal:noemail condition="not: contact/EmailAddress">
            <span tal:content="contact/Fullname|nothing" />
          </tal:noemail>
        </tal:contact>
      </td>
      <!-- CC Contacts Fullname/Email -->
      <td>
        <tal:cccontact repeat="cccontact model/CCContact">
          <tal:email condition="cccontact/EmailAddress">
            <a href="#"
               tal:attributes="href string:mailto:${cccontact/EmailAddress}">
              <div tal:content="cccontact/Fullname|nothing" />
            </a>
          </tal:email>
          <tal:noemail condition="not: cccontact/EmailAddress">
            <div tal:content="cccontact/Fullname|nothing" />
          </tal:noemail>
        </tal:cccontact>
      </td>
      <!-- CC Emails -->
      <td>
        <tal:ccemails define="ccemails model/CCEmails"
                      condition="ccemails"
                      repeat="ccemail python:model.CCEmails.split(',')">
          <a href="#"
             tal:attributes="href string:mailto:${ccemail}">
            <div tal:content="ccemail" />
          </a>
        </tal:ccemails>
      </td>
      <!-- State -->
      <td tal:define="state model/review_state|nothing">
        <span tal:condition="state"
              tal:content="python:state.capitalize().replace('_', ' ')"/>
      </td>
    </tr>
  </tbody>
</table>
